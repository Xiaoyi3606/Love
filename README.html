<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>我们的一周年</title>
  <meta name="description" content="一周年纪念：精美UI、烟花心形、时间轴、相册灯箱、倒计时与轻音乐" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0e1320;
      --bg-soft:#121831;
      --card:#151a2b;
      --text:#eef2ff;
      --text-soft:#c7d2fe;
      --accent:#ff6bb3;
      --accent-2:#7bdcff;
      --gold:#ffd56b;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:radial-gradient(1200px circle at 70% 10%,#12172a 0%,#0e1320 40%,#080b16 100%);color:var(--text);font-family:Inter,"Noto Serif SC","PingFang SC","Microsoft YaHei",system-ui}
    a{color:var(--accent)}
    /* 顶部英雄封面 */
    header.hero{
      position:relative;min-height:72vh;display:grid;place-items:center;text-align:center;overflow:hidden
    }
    .hero::before{
      content:"";position:absolute;inset:0;background:
        radial-gradient(1200px circle at 80% 20%,rgba(255,105,180,.12),transparent 40%),
        radial-gradient(1400px circle at 10% 90%,rgba(123,220,255,.10),transparent 45%);
      z-index:0
    }
    .hero-inner{position:relative;z-index:2;padding:24px;max-width:980px;width:100%}
    .title{
      font-family:"Noto Serif SC",serif;font-size:clamp(28px,6vw,52px);letter-spacing:.6px;margin:8px 0 10px
    }
    .subtitle{
      font-size:clamp(16px,3.2vw,20px);color:var(--text-soft);margin:0 0 18px
    }
    .pill{
      display:inline-flex;align-items:center;gap:8px;padding:8px 14px;border-radius:999px;
      background:rgba(255,255,255,.06);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.18);font-weight:600;color:#ffe8f2
    }
    .cta{
      display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:16px
    }
    .btn{
      border:none;outline:none;padding:10px 16px;border-radius:12px;cursor:pointer;font-weight:600;letter-spacing:.2px
    }
    .btn-primary{
      background:linear-gradient(90deg,var(--accent),#ff3e9e);color:white;box-shadow:0 16px 40px rgba(255,105,180,.3);transition:transform .15s ease
    }
    .btn-primary:hover{transform:translateY(-2px)}
    .btn-ghost{
      background:rgba(255,255,255,.10);color:#eaf2ff;border:1px solid rgba(255,255,255,.18);backdrop-filter:blur(6px)
    }
    /* 卡片与版式 */
    .section{padding:42px 18px}
    .container{width:min(1080px,92vw);margin:0 auto}
    .card{
      background:rgba(21,26,43,.8);border:1px solid rgba(255,255,255,.12);border-radius:20px;padding:24px;
      box-shadow:0 24px 80px rgba(0,0,0,.45),0 16px 40px rgba(255,105,180,.12)
    }
    .card h3{margin:0 0 12px;font-size:clamp(20px,3.6vw,26px)}
    .card p{line-height:1.9;color:#e9efff}
    /* 打字机与小作文 */
    .typewriter{min-height:80px;white-space:pre-wrap}
    .signature{margin-top:10px;color:#bcd0ff;font-size:14px}
    /* 时间轴 */
    .timeline{display:grid;gap:14px;margin-top:8px}
    .t-item{
      display:grid;grid-template-columns:120px 1fr;gap:12px;align-items:start;padding:14px;border-radius:14px;
      background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.14)
    }
    .t-date{font-weight:600;color:var(--gold)}
    .t-text{color:#eaf2ff}
    /* 相册网格 */
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .grid img{
      width:100%;height:200px;object-fit:cover;border-radius:14px;border:1px solid rgba(255,255,255,.14);cursor:pointer;
      transition:transform .18s ease, box-shadow .18s ease
    }
    .grid img:hover{transform:translateY(-2px);box-shadow:0 10px 28px rgba(123,220,255,.25)}
    /* 灯箱 */
    .lightbox{position:fixed;inset:0;background:rgba(8,11,22,.8);display:none;align-items:center;justify-content:center;z-index:100}
    .lightbox img{max-width:92vw;max-height:86vh;border-radius:16px;border:1px solid rgba(255,255,255,.2)}
    /* 漂浮心形 */
    .hearts{position:fixed;inset:0;pointer-events:none;z-index:1}
    .heart{
      position:absolute;width:18px;height:18px;transform:translate(-50%,-50%);opacity:.9;filter:drop-shadow(0 6px 16px rgba(255,105,180,.4))
    }
    .heart::before,.heart::after{
      content:"";position:absolute;width:9px;height:14px;background:linear-gradient(180deg,#ff7ab5 0%,#ff3e9e 50%,#ff0066 100%);
      border-radius:9px 9px 0 0;transform:rotate(-45deg);transform-origin:0 100%;left:4px;top:2px
    }
    .heart::after{transform:rotate(45deg);transform-origin:100% 100%;left:auto;right:4px}
    /* 倒计时卡 */
    .countdown{display:flex;gap:14px;flex-wrap:wrap}
    .count-item{
      background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.16);border-radius:14px;padding:12px 14px;min-width:120px;text-align:center
    }
    .count-item .num{font-size:26px;font-weight:700;color:#fff}
    .count-item .label{font-size:12px;color:#c7d6ff}
    /* 底部 */
    footer{padding:22px 18px;text-align:center;color:#89a4ff;font-size:12px}
    /* 响应式 */
    @media (max-width:768px){
      .grid{grid-template-columns:1fr 1fr}
      .t-item{grid-template-columns:100px 1fr}
    }
    @media (max-width:460px){
      .grid{grid-template-columns:1fr}
      .t-item{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <header class="hero">
    <div class="hero-inner">
      <div class="pill">我们的一周年 · One Year Anniversary</div>
      <h1 class="title">和你一起，温柔的一整年</h1>
      <p class="subtitle">把喜欢写进每一个普通的日子里，等它们在回望时都闪闪发光。</p>
      <div class="cta">
        <button class="btn btn-primary" id="playFireworks">点亮此刻</button>
        <button class="btn btn-ghost" id="toggleMusic">轻音乐</button>
        <button class="btn btn-ghost" id="scrollEssay">看看小作文</button>
      </div>
    </div>
    <canvas id="fw"></canvas>
  </header>

  <main>
    <section class="section">
      <div class="container card">
        <h3>一周年小作文</h3>
        <div class="typewriter" id="essay"></div>
        <p class="signature">—— 写给那位让我把生活过成诗的人</p>
      </div>
    </section>

    <section class="section">
      <div class="container card">
        <h3>我们的时间轴</h3>
        <div class="timeline">
          <div class="t-item">
            <div class="t-date">2024-11-08</div>
            <div class="t-text">第一次把“喜欢”说出口。后来每一次目光相遇，都像按下了心动的重播键。</div>
          </div>
          <div class="t-item">
            <div class="t-date">2025-01-14</div>
            <div class="t-text">去看了冬日的落日。风很冷，你的手很暖，连影子也被染成了金色。</div>
          </div>
          <div class="t-item">
            <div class="t-date">2025-04-02</div>
            <div class="t-text">雨后走在花下，路灯像星，花像雨。那晚我决定，把全部温柔都给你。</div>
          </div>
          <div class="t-item">
            <div class="t-date">2025-08-08</div>
            <div class="t-text">我们为一个小小的愿望庆祝。愿望实现的时候，我偷偷许了另一个：永远。</div>
          </div>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="container card">
        <h3>一周年倒计时</h3>
        <p style="color:#cfe0ff;margin:6px 0 12px">设置我们的纪念日后，倒计时会自动刷新。</p>
        <div class="countdown" id="countdown"></div>
      </div>
    </section>

    <section class="section">
      <div class="container card">
        <h3>小相册</h3>
        <p style="color:#cfe0ff;margin:6px 0 12px">点击图片可全屏预览，支持手机手势缩放。</p>
        <div class="grid" id="gallery">
          <!-- 将以下 src 替换为你的图片地址或相对路径 -->
          <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1200&auto=format&fit=crop" alt="星空" />
          <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1200&auto=format&fit=crop" alt="夜色" />
          <img src="https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?q=80&w=1200&auto=format&fit=crop" alt="霓虹" />
          <img src="https://images.unsplash.com/photo-1513558161293-c97ee98c78ee?q=80&w=1200&auto=format&fit=crop" alt="海边" />
          <img src="https://images.unsplash.com/photo-1525351484163-7529414344d8?q=80&w=1200&auto=format&fit=crop" alt="花园" />
          <img src="https://images.unsplash.com/photo-1486427944299-d1955d23e34d?q=80&w=1200&auto=format&fit=crop" alt="城市" />
        </div>
      </div>
    </section>

    <div class="lightbox" id="lightbox"><img id="lightImg" src="" alt="preview" /></div>

  </main>

  <footer>如果你愿意，我们就把第二年也过得闪闪发光。</footer>

  <audio id="bgm" preload="auto"></audio>

  <div class="hearts" id="hearts"></div>

  <script>
    // ========== 打字机小作文 ==========
    const essayText = [
      "这一年，风有甜味，月亮有温度，连路灯都像在替我照亮你的名字。",
      "我们把许多普通的日子，串成了柔软而漫长的项链。它不耀眼，却足够贴近心脏。",
      "我不擅长说“永远”，但我擅长把每一个今天都过成想要的明天——然后把它们认真地交给你。",
      "愿下一个春夏秋冬，仍有你。愿每次回头，都有光。"
    ].join("\\n\\n");
    const essayEl = document.getElementById('essay');
    function typeWriter(text, speed=34){
      essayEl.textContent = '';
      let i = 0;
      const timer = setInterval(()=>{
        essayEl.textContent += text[i++];
        if(i >= text.length) clearInterval(timer);
      }, speed);
    }

    // ========== 漂浮心形 ==========
    const heartsEl = document.getElementById('hearts');
    function spawnHeart(){
      const h = document.createElement('div');
      h.className = 'heart';
      const x = Math.random()*100, y = 100;
      h.style.left = x + '%'; h.style.top = y + '%';
      heartsEl.appendChild(h);
      const vy = - (Math.random()*0.6 + 0.4);
      const vx = (Math.random()-0.5)*0.3;
      let life = 1.2;
      function step(){
        const rect = h.getBoundingClientRect();
        const top = rect.top/window.innerHeight*100;
        const left = rect.left/window.innerWidth*100;
        h.style.top = (top + vy) + '%';
        h.style.left = (left + vx) + '%';
        life -= 0.012;
        h.style.opacity = Math.max(life, 0);
        if(life <= 0 || top < -10){ h.remove(); return; }
        requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    }
    setInterval(()=>{ if(document.hasFocus()) spawnHeart(); }, 800);

    // ========== 简易烟花 ==========
    const fw = document.getElementById('fw');
    const ctx = fw.getContext('2d', { alpha:true });
    let W,H,DPR = Math.min(window.devicePixelRatio||1,2);
    function resize(){
      W = fw.width = Math.floor(window.innerWidth * DPR);
      H = fw.height = Math.floor(Math.max(window.innerHeight*0.72, 400) * DPR);
      fw.style.width = window.innerWidth + 'px';
      fw.style.height = Math.max(window.innerHeight*0.72, 400) + 'px';
    }
    window.addEventListener('resize', resize, { passive:true });
    resize();
    const TAU = Math.PI*2; const rnd = (a,b)=>Math.random()*(b-a)+a;
    class P{
      constructor(x,y,a,s,c){ this.x=x; this.y=y; this.vx=Math.cos(a)*s; this.vy=Math.sin(a)*s; this.c=c;
